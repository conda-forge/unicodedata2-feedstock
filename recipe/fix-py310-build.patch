From 44409e0c0cd5576378e7047f302a65617b767aa8 Mon Sep 17 00:00:00 2001
From: "Kirill A. Korinsky" <kirill@korins.ky>
Date: Wed, 17 Nov 2021 13:29:44 +0100
Subject: [PATCH] Python 3.10 compatibility (#49)

Overstep https://github.com/python/cpython/pull/22713
---
 unicodedata2/unicodedata.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/unicodedata2/py3/unicodedata.c b/unicodedata2/py3/unicodedata.c
index 1a95a8c..764e315 100644
--- a/unicodedata2/py3/unicodedata.c
+++ b/unicodedata2/py3/unicodedata.c
@@ -17,7 +17,12 @@
 
 #include "Python.h"
 #ifndef PYPY_VERSION
+#if PY_MINOR_VERSION < 10
 #include "ucnhash.h"
+#else
+#define Py_BUILD_CORE
+#include "internal/pycore_ucnhash.h"
+#endif
 #endif
 #include "structmember.h"
 #include "unicodectype.h"
-- 
2.33.1

